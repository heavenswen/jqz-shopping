!function(e){e.jqz_shopping=function(t){function n(e){var t=e.find(u.unit).attr("data-unit")||e.find(u.unit).text(),n=e.find(r.age).val()||e.find(r.age).text()||1,c=parseFloat(t)*parseFloat(n);return c}function c(){f=0;for(var t=e(a),c=0;c<t.size();c++){var l=t.eq(c),p=n(l);"object"==typeof r.cell&&"function"==typeof r.cell[1]&&(p=r.cell[1](l,p)),p=i(p),u.syn&&l.find(u.log).text(p),r.check?l.find(r.check).prop("checked")&&(f+=Number(p)):f+=Number(p)}return o()}function o(){var t=i(f);if("function"==typeof r.fun&&(t=i(r.fun(t))),"object"==typeof r.total)for(var n=0;n<r.total.length;n++){var c=r.total[n];e(c).text(t)}else e(r.total).text(t);return t}function i(e){return e=parseFloat(e),"number"!=typeof e&&console.log("运算中出现非数字字符"),e.toFixed(r.fixed)}var r={cell:[".li"],unit:[".unit",!1],age:".age",check:"input[type='checkbox']",fixed:1,total:".total",fun:""};t&&e.extend(r,t);var a="object"==typeof r.cell?r.cell[0]:r.cell,f=0,u=[];"object"==typeof r.unit&&(u.unit=r.unit[0],u.syn=r.unit[1],u.log=r.unit[2]?r.unit[2]:r.unit[0]),c(),e(r.age).on("input propertychange",function(){var t=e(this).parents(r.cell);if(r.check&&1!=t.find(r.check).prop("checked")){var o=n(t);t.find(u.log).text(o)}else c()}),r.check&&e("body").on("change",r.check,function(){c()}),this.checked=function(){for(var t=e(r.check),n=!0,o=0;o<t.size();o++)if(0==t.eq(o).prop("checked")){n=!1;break}t.prop("checked",!n),c()},this.again=function(){return c()}}}(window.Zepto||window.jQuery);