!function(t){t.jqz_shopping=function(e){function n(t){var e=t.find(f.unit).attr("data-unit")||t.find(f.unit).text(),n=t.find(u.age),o=i(n),c=parseFloat(e)*o;return c=r(c),"function"==typeof u.single&&(c=u.single(t,c)),f.syn&&t.find(f.log).text(r(c)),c}function i(t){var e=Number(t.val())||Number(t.text());return(1>e||"number"!=typeof e)&&(t.is("input")?t.val(1):t.text(1),e=1),e}function o(){a=0;for(var e=t(u.cell),i=0;i<e.size();i++){var o=e.eq(i),r=n(o);u.check?o.find(u.check).prop("checked")&&(a+=+r):a+=+r}return c()}function c(){var e=r(a);if("function"==typeof u.fun&&(e=r(u.fun(e))),"object"==typeof u.total)for(var n=0;n<u.total.length;n++){var i=u.total[n];t(i).text(e)}else t(u.total).text(e);return e}function r(t){return t=parseFloat(t),"number"!=typeof t&&console.log("运算中出现非数字字符"),t.toFixed(u.fixed)}var u={cell:".li",single:"",unit:[".unit",!1],age:".age",check:"input[type='checkbox']",fixed:1,total:".total",fun:""};e&&t.extend(u,e);var a=0,f=[];"object"==typeof u.unit&&(f.unit=u.unit[0],f.syn=u.unit[1],f.log=u.unit[2]?u.unit[2]:u.unit[0]),o(),t("body").on("input propertychange",u.age,function(){var e=t(this).parents(u.cell);if(u.check&&1!=e.find(u.check).prop("checked")){n(e)}else o()}),u.check&&t("body").on("change",u.check,function(){o()}),this.prop=function(e){for(var n=t(e?e:u.check),i=!0,c=0;c<n.size();c++)if(0==n.eq(c).prop("checked")){i=!1;break}n.prop("checked",!i),o()},this.again=function(){return o()}}}(window.Zepto||window.jQuery);